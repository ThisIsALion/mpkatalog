<!DOCTYPE html>
<html>
<head>
  <title>Strafen-Dropdown</title>
  <style>
    body {
      background-color: #333;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1.header {
      color: #ffa500;
    }

    label {
      display: block;
      margin-bottom: 10px;
    }

    select {
      width: 300px;
      height: 200px;
      margin-bottom: 10px;
    }

    button {
      background-color: #ffa500;
      color: #fff;
      border: none;
      padding: 10px 20px;
      margin-right: 10px;
      cursor: pointer;
    }

    #result {
      margin-top: 20px;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    li {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <h1 class="header">Strafen-Dropdown</h1>

  <label for="strafen">Wähle einen oder mehrere Paragraphen:</label>
  <select id="strafen" multiple>
    <optgroup label="§1 - Verkehr">
      <option value="§1.1 | 500$ | | ">§1.1 Falschparken</option>
      <option value="§1.2 | 1500$ | | ">§1.2 Blockieren von Fuß- und Fahrtwegen</option>
			<option value="§1.2 | 1250$ | | ">§1.3 Unsachgemäßes Flug- & Landeverhalten</option>
			<option value="§1.2 | 1500$ | | ">§1.4 Gefährliche Flugweise</option>
			<option value="§1.2 | 1500$ | | ">§1.5 Gefährliche Fahrweise </option>
			<option value="§1.2 | | 4 Hafteinheiten | ">§1.6 Fahrerflucht</option>
			<option value="§1.2 | | 5 Hafteinheiten | ">§1.7 Missbrauch von Sonderrechten</option>
			<option value="§1.2 | | 10 Hafteinheiten| ">§1.8 Stehlen von Fahr- & Flugzeugen</option>
	    
      <!-- Weitere Optionen für §1 - Verkehr einfügen -->
    </optgroup>
    <optgroup label="§2 - Regelungen">
      <option value="§2.1 | 500$ | | ">§2.1 Leichte Missachtung der Torregelungen</option>
      <option value="§2.2 | | 4 Hafteinheiten | ">§2.2 Missachtung der Torregelungen</option>
      <!-- Weitere Optionen für §2 - Regelungen einfügen -->
    </optgroup>
    <optgroup label="§3 - Eigentum">
      <option value="§3.1 | 750$ | | Verhör">§3.1 Fehlen eines Dienstausweises</option>
      <option value="§3.2 | 1000$ | | ">§3.2 Sachbeschädigung</option>
      <option value="§3.3 | | 5 Hafteinheiten | ">§3.3 Unangebrachtes Nutzen von Ausrüstung</option>
      <option value="§3.4 | | 5 Hafteinheiten | Abgabe ">§3.4 Unangebrachtes Abfeuern von Ausrüstung</option>
      <option value="§3.5 | 750$ | | Abgabe">§3.5 Besitz von illegalen Fahrzeugen</option>
      <option value="§3.6 | 1000$ | | Abgabe">§3.6 Besitz von illegalen Gegenständen</option>
      <option value="§3.7 | 1500$ | | Abgabe + GD-Verhör">§3.7 Besitz von illegalen Waffen der Stufe 2+</option>
      <option value="§3.8 | | 15 Hafteinheiten | Abgabe">§3.8 Besitz von illegalem Sprengstoff</option>
      <option value="§3.9 | | 15 Hafteinheiten | GD-Verhör + Abgabe">§3.9 Besitz von illegalen Handschellen</option>
      <option value="§3.10 | | | Degradierung">§3.10 Schmuggeln von Illegalem</option>
      <option value="§3.11 | | | Entlassung + StaatsGF-Transport">§3.11 Handel mit NATO Eigentum</option>
    </optgroup>
    <optgroup label="§4 - Diebstahl">
      <option value="§4.1 | 1000$ | | Abgabe">§4.1 Leichter Diebstahl</option>
      <option value="§4.2 | | 6 Hafteinheiten | Abgabe">§4.2 Diebstahl</option>
      <option value="§4.3 | | | Degradierung  Abgabe">§4.3 Raub</option>
    </optgroup>
    <optgroup label="§5 - Verhalten">
      <option value="§5.1 | 500$ | | ">§5.1 Unangebrachtes Funkverhalten</option>
      <option value="§5.2 | | 5 Hafteinheiten | ">§5.2 Unangebrachtes Verhalten im Dienst</option>
      <option value="§5.3 | | 7 Hafteinheiten | ">§5.3 Respektlosigkeit</option>
      <option value="§5.4 | | 9 Hafteinheiten | ">§5.4 Beleidigung</option>
      <option value="§5.5 | | 9 Hafteinheiten | ">§5.5 Belästigung</option>
      <option value="§5.6 | | | Degradierung (doppelt bei CPT+)">§5.6 Sexuelle Belästigung</option>
      <option value="§5.7 | | | Degradierung (doppelt bei CPT+)">§5.7 Intergeschlechtliches unangebrachtes Verhalten (& Simpen)</option>
      <option value="§5.8 | | 5 Hafteinheiten | ">§5.8 Befehlsverweigerung</option>
      <option value="§5.9 | | | Haupttäterstrafe x 0.5">§5.9 Unterlassene Hilfeleistung</option>
      <option value="§5.10 | | 10 Hafteinheiten | MP-Verhör">§5.10 Rufschädigung</option>
      <option value="§5.11 | | | Regimentsentlassung">§5.11 Schwere Rufschädigung</option>
      <option value="§5.12 | 500$ | | ">§5.12 Vandalismus</option>
    </optgroup>
    <!-- Weitere optgroups für die anderen Abschnitte einfügen -->
  </select>

  <button id="calculate-btn">Berechnen</button>
  <button id="clear-btn">Clear</button>

  <div id="result"></div>
  <div id="selected-list"></div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(document).ready(function() {
      var selectedParagraphs = [];
      var totalgeldstrafe = 0;
      var totalHafteinheiten = 0;
      var sonstige = [];
	  
	  let selectedParagraphs_unique = [];
	  let sonstige_unique = [];
	  

      $('#calculate-btn').click(function() 
	  {
        var selectedOptions = $('#strafen').val();

        for (var i = 0; i < selectedOptions.length; i++) {
          
		  var option = selectedOptions[i];
          var values = option.split("|");
		  
		  var sonstiger_teil = values[3]
          var paragraph = values[0]
          var kosten = values[1]
		  var hafteinheit = values[2]
		  
		  
		  
		  // Add hafteinheit
		  if (paragraph.replace(/\s/g, '').length) {
			  console.log("Para")
			selectedParagraphs.push(paragraph)
		  
		  // Add hafteinheit
		  if (hafteinheit.replace(/\s/g, '').length) {
			    console.log("haft")
			totalHafteinheiten += parseInt(hafteinheit.replace('Hafteinheiten',''))
		  }
		    // Add kosten
		  if (kosten.replace(/\s/g, '').length) {
			    console.log("geld")
			totalgeldstrafe += parseInt(kosten.replace('$',''))
			 console.log(totalgeldstrafe)
		  
		  }
		   // Add hafteinheit
		  if (sonstiger_teil.replace(/\s/g, '').length) {
			  console.log("sonstige")
			sonstige.push(sonstiger_teil)
		}
		}
		
		selectedParagraphs_unique =  [...new Set(selectedParagraphs)]
		sonstige_unique =  [...new Set(sonstige)]

        var output = "<h3>Ausgewählte Paragraphen:</h3><ul>";

        for (var j = 0; j < selectedParagraphs_unique.length; j++) {
          output += "<li>" + selectedParagraphs_unique[j] + "</li>";
        }

        output += "</ul><br>Gesamtstrafe: $" + totalgeldstrafe;

        if (totalHafteinheiten > 0) {
          output += "<br>Gesamthaftstrafe: " + totalHafteinheiten + " Hafteinheiten";
        }

        if (sonstige_unique.length > 0) {
          output += "<br>Sonstiges: " + sonstige_unique.join(", ");
        }

        $('#result').html(output);
      }});

	  
      $('#clear-btn').click(function() {
        $('#strafen').val([]);
        selectedParagraphs = [];
        totalgeldstrafe = 0;
        totalHafteinheiten = 0;
        sonstige = [];
        $('#result').html("");
      });
    });
  </script>
</body>
</html>
